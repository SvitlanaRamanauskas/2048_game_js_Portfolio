{"mappings":"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","sources":["src/scripts/main.js"],"sourcesContent":["'use strict';\n\nconst rows = 4;\nconst columns = 4;\nlet score = 0;\nlet field;\nconst page = document.querySelector('.container');\nconst startButton = document.getElementById('start');\nlet gameStarted = false;\nlet gameOver = false;\nlet moved = false;\n\nstartButton.addEventListener('click', function() {\n  if (startButton.classList.contains('start')) {\n    startButton.classList.remove('start');\n    startButton.classList.add('restart');\n    startButton.innerText = 'Restart';\n\n    if (!gameStarted) {\n      const messageStart = page.querySelector('.message-start');\n\n      messageStart.classList.add('hidden');\n      gameStarted = true;\n      gameOver = false;\n      setGame();\n    }\n  } else if (startButton.classList.contains('restart')) {\n    clearGame();\n    startButton.innerText = 'Restart';\n\n    const messageLose = page.querySelector('.message-lose');\n\n    messageLose.classList.add('hidden');\n    gameStarted = true;\n    gameOver = false;\n    setGame();\n  }\n});\n\nfunction clearGame() {\n  startButton.innerText = 'Start';\n  score = 0;\n  document.getElementById('score').innerText = score;\n\n  field = new Array(rows).fill(0).map(() => new Array(columns).fill(0));\n\n  for (let r = 0; r < rows; r++) {\n    for (let c = 0; c < columns; c++) {\n      const cell = document.getElementById(r.toString() + '-' + c.toString());\n\n      updateCell(cell, 0);\n    }\n  }\n}\n\nfunction setGame() {\n  field = [\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n  ];\n\n  const fieldContainer = document.getElementById('field');\n\n  fieldContainer.innerHTML = '';\n\n  for (let r = 0; r < rows; r++) {\n    for (let c = 0; c < columns; c++) {\n      const cell = document.createElement('div');\n\n      cell.id = r.toString() + '-' + c.toString();\n\n      const num = field[r][c];\n\n      updateCell(cell, num);\n      document.getElementById('field').append(cell);\n    }\n  }\n  setTwo();\n  setTwo();\n}\n\nfunction updateCell(cell, num) {\n  cell.innerText = '';\n  cell.classList.value = '';\n  cell.classList.add('field-cell');\n\n  if (num > 0) {\n    cell.innerText = num.toString();\n\n    if (num <= 2048) {\n      cell.classList.add('field-cell--' + num.toString());\n\n      if (num === 2048) {\n        messageWin();\n      }\n    }\n  }\n}\n\ndocument.addEventListener('keyup', (element) => {\n  if (!hasEmptyCell() && !hasPossibleMoves()) {\n    gameOver = true;\n    messageGameOver();\n    return\n  }\n\n  switch (element.code) {\n    case 'ArrowLeft':\n      moveLeft();\n      setTwo();\n      break;\n    case 'ArrowRight':\n      moveRight();\n      setTwo();\n      break;\n    case 'ArrowUp':\n      moveUp();\n      setTwo();\n      break;\n    case 'ArrowDown':\n      moveDown();\n      setTwo();\n      break;\n  }\n\n  document.getElementById('score').innerText = score;\n});\n\nfunction filterZero(row) {\n  return row.filter(num => num !== 0);\n}\n\nfunction move(row) {\n  let filteredRow = filterZero(row);\n\n  for (let ind = 0; ind < filteredRow.length - 1; ind++) {\n    if (filteredRow[ind] === filteredRow[ind + 1]) {\n      filteredRow[ind] *= 2;\n      filteredRow[ind + 1] = 0;\n      score += filteredRow[ind];\n    }\n  }\n\n  filteredRow = filterZero(filteredRow);\n\n  while (filteredRow.length < columns) {\n    filteredRow.push(0);\n  }\n\n  return filteredRow;\n}\n\nfunction moveLeft() {\n\n  for (let r = 0; r < rows; r++) {\n    let row = field[r];\n    row = move(row);\n\n    field[r] = row;\n    for (let c = 0; c < columns; c++) {\n      const cell = document.getElementById(r.toString() + '-' + c.toString());\n      const num = field[r][c];\n\n      updateCell(cell, num);\n    }\n  }\n}\n\nfunction moveRight() {\n  for (let r = 0; r < rows; r++) {\n    let row = field[r];\n\n    row.reverse();\n    row = move(row);\n\n    field[r] = row.reverse();\n\n    for (let c = 0; c < columns; c++) {\n      const cell = document.getElementById(r.toString() + '-' + c.toString());\n      const num = field[r][c];\n\n      updateCell(cell, num);\n    }\n  }\n}\n\nfunction moveUp() {\n  for (let c = 0; c < columns; c++) {\n    let row = [field[0][c], field[1][c], field[2][c], field[3][c]];\n    row = move(row);\n\n    for (let r = 0; r < rows; r++) {\n      field[r][c] = row[r];\n\n      const cell = document.getElementById(r.toString() + '-' + c.toString());\n      const num = field[r][c];\n\n      updateCell(cell, num);\n    }\n  }\n}\n\nfunction moveDown() {\n  for (let c = 0; c < columns; c++) {\n    let row = [field[0][c], field[1][c], field[2][c], field[3][c]];\n\n    row.reverse();\n\n    row = move(row);\n\n    row.reverse();\n\n    for (let r = 0; r < rows; r++) {\n      field[r][c] = row[r];\n\n      const cell = document.getElementById(r.toString() + '-' + c.toString());\n      const num = field[r][c];\n\n      updateCell(cell, num);\n    }\n  }\n}\n\nfunction setTwo() {\n  if(!hasEmptyCell()) {\n    return;\n  }\n\n  let found = false;\n\n  const value = Math.random() < 0.9 ? 2 : 4;\n\n  while (!found) {\n    const r = Math.floor(Math.random() * rows);\n    const c = Math.floor(Math.random() * columns);\n\n    if (field[r][c] === 0) {\n      field[r][c] = value;\n\n      const cell = document.getElementById(r.toString() + '-' + c.toString());\n\n      cell.innerText = value.toString();\n      cell.classList.add('field-cell--' + value);\n      found = true;\n    }\n  }\n}\n\nfunction hasEmptyCell() {\n  for (let r = 0; r < rows; r++) {\n    for (let c = 0; c < columns; c++) {\n      if (field[r][c] === 0) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n\nfunction hasPossibleMoves() {\n  for (let r = 0; r < rows; r++) {\n    for (let c = 0; c < columns; c++) {\n      if (r > 0 && field[r][c] === field[r - 1][c]) return true;\n      if (r < rows - 1 && field[r][c] === field[r + 1][c]) return true;\n      if (c > 0 && field[r][c] === field[r][c - 1]) return true;\n      if (c < columns - 1 && field[r][c] === field[r][c + 1]) return true;\n    }\n  }\n\n  return false;\n}\n\nfunction messageGameOver() {\n  const messageLose = page.querySelector('.message-lose');\n\n  messageLose.classList.remove('hidden');\n}\n\nfunction messageWin() {\n  const winningMessage = page.querySelector('.message-win');\n\n  winningMessage.classList.remove('hidden');\n}\n\n"],"names":[],"version":3,"file":"index.f75de5e1.js.map","sourceRoot":"/__parcel_source_root/"}